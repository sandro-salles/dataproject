// Peity jQuery plugin version 3.0.3
// (c) 2015 Ben Pickles
//
// http://benpickles.github.io/peity
//
// Released under MIT license.
(function(g,x,h,w){var p=function(a,b){var c=x.createElementNS("http://www.w3.org/2000/svg",a);g(c).attr(b);return c},z="createElementNS"in x&&p("svg",{}).createSVGRect,d=g.fn.peity=function(a,b){z&&this.each(function(){var c=g(this),e=c.data("peity");e?(a&&(e.type=a),g.extend(e.opts,b)):(e=new y(c,a,g.extend({},d.defaults[a],b)),c.change(function(){e.draw()}).data("peity",e));e.draw()});return this},y=function(a,b,c){this.$el=a;this.type=b;this.opts=c},s=y.prototype;s.draw=function(){d.graphers[this.type].call(this,
this.opts)};s.fill=function(){var a=this.opts.fill;return g.isFunction(a)?a:function(b,c){return a[c%a.length]}};s.prepare=function(a,b){this.svg||this.$el.hide().after(this.svg=p("svg",{"class":"peity"}));return g(this.svg).empty().data("peity",this).attr({height:b,width:a})};s.values=function(){return g.map(this.$el.text().split(this.opts.delimiter),function(a){return parseFloat(a)})};d.defaults={};d.graphers={};d.register=function(a,b,c){this.defaults[a]=b;this.graphers[a]=c};d.register("pie",
{fill:["#ff9900","#fff4dd","#ffc66e"],radius:8},function(a){if(!a.delimiter){var b=this.$el.text().match(/[^0-9\.]/);a.delimiter=b?b[0]:","}b=g.map(this.values(),function(a){return 0<a?a:0});if("/"==a.delimiter)var c=b[0],b=[c,h.max(0,b[1]-c)];for(var e=0,c=b.length,t=0;e<c;e++)t+=b[e];t||(c=2,t=1,b=[0,1]);for(var n=2*a.radius,n=this.prepare(a.width||n,a.height||n),e=n.width(),i=n.height(),k=e/2,d=i/2,i=h.min(k,d),a=a.innerRadius,q=h.PI,r=this.fill(),f=this.scale=function(a,b){var c=a/t*q*2-q/2;return[b*
h.cos(c)+k,b*h.sin(c)+d]},l=0,e=0;e<c;e++){var u=b[e],j=u/t;if(0!=j){if(1==j)if(a)var j=k-0.01,o=d-i,m=d-a,j=p("path",{d:["M",k,o,"A",i,i,0,1,1,j,o,"L",j,m,"A",a,a,0,1,0,k,m].join(" ")});else j=p("circle",{cx:k,cy:d,r:i});else o=l+u,m=["M"].concat(f(l,i),"A",i,i,0,0.5<j?1:0,1,f(o,i),"L"),a?m=m.concat(f(o,a),"A",a,a,0,0.5<j?1:0,0,f(l,a)):m.push(k,d),l+=u,j=p("path",{d:m.join(" ")});g(j).attr("fill",r.call(this,u,e,b));n.append(j)}}});d.register("donut",g.extend(!0,{},d.defaults.pie),function(a){a.innerRadius||
(a.innerRadius=0.5*a.radius);d.graphers.pie.call(this,a)});d.register("line",{delimiter:",",fill:"#c6d9fd",height:16,min:0,stroke:"#4d89f9",strokeWidth:1,width:32},function(a){var b=this.values();1==b.length&&b.push(b[0]);for(var c=h.max.apply(h,a.max==w?b:b.concat(a.max)),e=h.min.apply(h,a.min==w?b:b.concat(a.min)),d=this.prepare(a.width,a.height),n=a.strokeWidth,i=d.width(),k=d.height()-n,g=c-e,c=this.x=function(a){return a*(i/(b.length-1))},q=this.y=function(a){var b=k;g&&(b-=(a-e)/g*k);return b+
n/2},r=q(h.max(e,0)),f=[0,r],l=0;l<b.length;l++)f.push(c(l),q(b[l]));f.push(i,r);d.append(p("polygon",{fill:a.fill,points:f.join(" ")}));n&&d.append(p("polyline",{fill:"transparent",points:f.slice(2,f.length-2).join(" "),stroke:a.stroke,"stroke-width":n,"stroke-linecap":"square"}))});d.register("bar",{delimiter:",",fill:["#4D89F9"],height:16,min:0,padding:0.1,width:32},function(a){for(var b=this.values(),c=h.max.apply(h,a.max==w?b:b.concat(a.max)),e=h.min.apply(h,a.min==w?b:b.concat(a.min)),d=this.prepare(a.width,
a.height),g=d.width(),i=d.height(),k=c-e,a=a.padding,s=this.fill(),q=this.x=function(a){return a*g/b.length},r=this.y=function(a){return i-(k?(a-e)/k*i:1)},f=0;f<b.length;f++){var l=q(f+a),u=q(f+1-a)-l,j=b[f],o=r(j),m=o,v;k?0>j?m=r(h.min(c,0)):o=r(h.max(e,0)):v=1;v=o-m;0==v&&(v=1,0<c&&k&&m--);d.append(p("rect",{fill:s.call(this,j,f,b),x:l,y:m,width:u,height:v}))}})})(jQuery,document,Math);
